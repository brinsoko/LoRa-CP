{# app/templates/groups_list.html #}
{% extends "base.html" %}
{% block title %}Groups{% endblock %}
{% block content %}

<div class="card">
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h5 class="mb-0">Groups</h5>
      <a class="btn btn-sm btn-primary" href="{{ url_for('groups.add_group') }}">Add Group</a>
    </div>

    {% if groups %}
      <div class="table-responsive">
        <table class="table table-striped table-bordered align-middle">
          <thead>
            <tr>
              <th style="width:60px;" class="text-center">#</th>
              <th>Name</th>
              <th>Description</th>
              <th class="text-center" style="width:140px;">Checkpoints</th>
              <th class="text-end" style="width: 180px;">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for g in groups %}
            <tr>
              <td class="text-center">{{ loop.index }}</td>
              <td>{{ g.name }}</td>
              <td class="text-break" style="max-width: 420px;">{{ g.description or 'â€”' }}</td>
              <td class="text-center">
                <span class="badge bg-secondary">{{ g.checkpoints|length }}</span>
              </td>
              <td class="text-end">
                <a class="btn btn-sm btn-outline-primary"
                   href="{{ url_for('groups.edit_group', group_id=g.id) }}">Edit</a>
                <form class="d-inline"
                      method="post"
                      action="{{ url_for('groups.delete_group', group_id=g.id) }}"
                      onsubmit="return confirm('Delete group {{ g.name }}?');">
                  <button class="btn btn-sm btn-outline-danger" type="submit">Delete</button>
                </form>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p class="text-muted mb-0">No groups yet.</p>
    {% endif %}
  </div>
</div>

{% endblock %}